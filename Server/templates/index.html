<!DOCTYPE html>
<html lang="en">
<head>
    <title>Index</title>
    <link rel="stylesheet" type="text/css" href="">
</head>

<body>
<div class="main">
    <p>Please enter the required details</p><br>
    <form class="form-inline" method="POST">
            <div class="pure-g">
                <div>
                    Name: <input type="text" name="username">
                </div><br>
                <div>
                    <label>Area: </label><input type="text" name="area">
                    <label>pH: </label><input type="text" name="ph">
                    <label>Soil Type: </label><input type="text" name="soil_type">
                </div><br>
                <div>
                    <label>Nitrogen: </label><input type="text" name="nitrogen">
                    <label>Phosphorus: </label><input type="text" name="phosphorus">
                    <label>Potassium: </label><input type="text" name="potassium">
                </div><br>
                <div>
                    <label>Crop Season: </label><input type="text" name="crop_season">
                    <label>Current planted crop: </label><input type="text" name="current_planted_crop">
                    <label>Current crop month: </label><input type="text" name="current_crop_month">
                </div><br>
                <div>
                    <label>Predicted month: </label><input type="text" name="predict_month">
                    <label>Is the predicted month, current?: </label><input type="text" name="isCurrent">
                </div><br>
                <div>
                    <label>Latitude: </label><input type="text" name="lat">
                    <label>Longitude: </label><input type="text" name="lng">
                    <label>District: </label><input type="text" name="district">
                    <label>State: </label><input type="text" name="state">
                </div><br>
    </div>
      
    </form>

    <button type="submit" value="Submit" onclick="submit()">Submit</button>
</div>
<br>
<div class="main">
    <h2>Response from Server</h2>
    {% if name %}
        <p>Welcome to my site {{ name }} </p>
        <p>Area: {{area}}</p>
        <p>Potassium: {{potassium}}</p>
        <p>Nitrogen: {{nitrogen}}</p>
        <p>Phosphorus: {{phosphorus}}</p>
        <p>pH: {{ph}}</p>
        <p>Crop Season: {{crop_season}}</p>
        <p>Current planted crop: {{current_planted_crop}}</p>
        <p>Current crop month: {{current_crop_month}}</p>
        <p>Predicted month: {{predict_month}}</p>
        <p>Is the predicted month, current?: {{isCurrent}}</p>
        <p>Soil Type: {{soil_type}}</p>
        <p>Latitude: {{lat}}</p>
        <p>Longitude: {{lng}}</p>
        <p>District: {{district}}</p>
        <p>State: {{state}}</p>

    {% endif %}
</div>



<script type="text/javascript">


    function isJSON(str) {
        try {
            return (JSON.parse(str) && !!str);
        } catch (e) {
            return false;
        }
    }
    
        function submit() {
    
            var name = document.getElementsByName("name");
            var area = document.getElementsByName("area");
            
            var ph= document.getElementsByName("ph");
            var soil_type = document.getElementsByName("soil_type");
            
            var nitrogen = document.getElementsByName("nitrogen");
            var phosphorus = document.getElementsByName("phosphorus");
            var potassium = document.getElementsByName("potassium");
            var crop_season = document.getElementsByName("crop_season");

            var current_planted_crop = document.getElementsByName("current_planted_crop");
            var current_crop_month = document.getElementsByName("current_crop_month");
            var predict_month = document.getElementsByName("predict_month");
            var isCurrent = document.getElementsByName("isCurrent");
            
            var lat = document.getElementsByName("lat");
            var lng= document.getElementsByName("lng");
            var district = document.getElementsByName("district");
            var state = document.getElementsByName("state");
            

    
            
            let url = "http://localhost:5000/predict";
    
        
            // Json data should be written here change the static values with the input field values
            // take the data from the input fileds and grab the values like name field listed below ("ph": ph.value) format must be same 
            var data = JSON.stringify({ "name": name.value,
                    "ph": 1.0,
                    "nitrogen": 2.0,
                    "phosphorous": 3.0,
                    "potassium": 4.0,
                    "area": 5.0,
                    "predict_month": "JAN",
                    "current_crop_month": "FEB",
                    "current_planted_crop": "MAR",
                    "crop_season": "Kharif",
                    "soil_type": "Alluvial",
                    "lat": "25.594095",
                    "lng": "85.137566",
                    "isCurrent": "False", // this filed should be a Radio type returning value with either True or False
                    "district": "AURANGABAD",
                    "state": "Bihar"
        
        });
            
            if(isJSON(data)){
    
           
            let xhr = new XMLHttpRequest();
            xhr.open("POST", url);
    
            xhr.setRequestHeader("Accept", "application/json");
            xhr.setRequestHeader("Content-Type", "application/json");
    
            xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                console.log(xhr.responseText);
       

                // xhr.responseText this is the json responce(result from the server) which have to be decoded and display the result as needed
                alert(xhr.responseText);


            }};
           
            xhr.send(data);



            }

        }
    
    </script>







</body>
</html>